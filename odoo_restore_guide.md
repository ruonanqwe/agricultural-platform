# Odoo数据库恢复和迁移指南

## 🔐 重要信息记录

### Odoo主密码
```
ZH3Y-6YB6-GAQV
```
**请妥善保管此密码，用于数据库管理操作**

### 数据库配置信息
- **数据库名称**: `agricultural_db`
- **管理员用户**: `admin`
- **管理员密码**: `admin123`
- **访问地址**: `http://localhost:8069`

## 📋 数据库恢复步骤

### 1. 在Odoo恢复界面填写信息：

```
主密码: ZH3Y-6YB6-GAQV
文件: [选择您的备份文件]
数据库名称: agricultural_db
中和: ☑️ (勾选)
此数据库是一个副本: ☑️ (勾选，如图所示)
```

### 2. 点击"继续"按钮完成恢复

### 3. 恢复完成后的验证步骤：

1. **访问系统**
   ```
   URL: http://localhost:8069
   用户名: admin
   密码: admin123
   ```

2. **检查数据完整性**
   - 验证产品数据是否完整
   - 检查价格记录是否正确
   - 确认分类设置是否正常

## 🚀 自动化迁移脚本

如果您希望使用脚本自动化迁移，请运行：

```bash
# 安装依赖
pip3 install pandas xmlrpc

# 运行迁移脚本
python3 odoo_database_migration.py
```

## 📊 迁移后的功能

### 已迁移的数据：
- ✅ 农产品基础信息
- ✅ 价格历史记录
- ✅ 产品分类数据
- ✅ 市场地点信息

### 新增的Odoo功能：
- 📈 **销售管理**: 客户订单、报价单
- 📦 **库存管理**: 库存跟踪、入库出库
- 💰 **采购管理**: 供应商管理、采购订单
- 📊 **财务管理**: 会计凭证、财务报表
- 👥 **客户关系**: 客户信息、联系记录

## 🔧 配置建议

### 1. 设置公司信息
- 进入 设置 → 公司 → 更新公司信息
- 设置货币为人民币(CNY)
- 配置税率和会计科目

### 2. 配置用户权限
- 创建不同角色的用户
- 设置访问权限
- 配置审批流程

### 3. 自定义字段
- 为产品添加农产品特有字段
- 设置价格变动提醒
- 配置季节性产品标识

## 📱 移动端访问

Odoo支持移动端访问：
- 下载Odoo官方APP
- 使用相同的登录信息
- 支持离线数据同步

## 🔄 数据同步

如需保持与原系统的数据同步：

1. **API集成方式**
   ```python
   # 使用XML-RPC API同步数据
   import xmlrpc.client
   
   # 连接配置
   url = 'http://localhost:8069'
   db = 'agricultural_db'
   username = 'admin'
   password = 'admin123'
   ```

2. **定时同步脚本**
   - 设置cron任务
   - 定期同步价格数据
   - 自动备份数据库

## 🆘 故障排除

### 常见问题：

1. **主密码错误**
   - 确认使用: `ZH3Y-6YB6-GAQV`
   - 检查输入是否有空格

2. **数据库连接失败**
   - 检查PostgreSQL服务状态
   - 验证网络连接

3. **模块安装失败**
   - 重启Odoo服务
   - 检查模块依赖关系

### 日志查看：
```bash
# 查看Odoo日志
docker-compose logs odoo

# 查看迁移日志
cat odoo_migration.log
```

## 📞 技术支持

如遇到问题，请提供以下信息：
- 错误日志内容
- 操作步骤描述
- 系统环境信息
- 数据库状态

---

**重要提醒**: 请定期备份数据库，确保数据安全！
